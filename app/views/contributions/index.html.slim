section.section
  .container
    .columns
      .column.is-3
        = render 'shared/account_nav'
      .column.is-9.content
        h1.title Donations
        - if @contributions.count == 0
          p Make your first contribution to your portfolio:
        - else
          p
            ' You have made
            => pluralize(@contributions.count, 'donation')
            | to your charity portfolio.

        = render 'shared/contribution_form'

        section
          - if @contributions.present?
            h1.subtitle Donation History

            table.table.is-fullwidth data-behavior="accordion"
              thead
                th Donation amount
                th Distributions
                th Donated at
                th Transaction id
              - @contributions.each do |contribution|
                tr
                  td = number_to_currency(contribution.amount_cents / 100.0)
                  td data-target="contribution-#{contribution.id}"
                    p
                      a
                        ' Distributed to
                        = pluralize(contribution.donations.count, 'charity')

                    .is-hidden id="contribution-#{contribution.id}"
                      ul
                        - contribution.donations.each do |donation|
                          li
                            strong => donation.organization.name
                            = number_to_currency(donation.amount_cents / 100.0)
                  td
                    => time_ago_in_words(contribution.processed_at)
                    | ago
                  td = contribution.id
